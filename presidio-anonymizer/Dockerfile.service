FROM python:3.11-slim-bookworm

ENV PIPENV_VENV_IN_PROJECT=1
ENV PIP_NO_CACHE_DIR=1
WORKDIR /opt/app/

COPY . /opt/app/

RUN pip install . waitress pipenv flask && pipenv install --deploy

CMD ["waitress-serve", "--port=5002", "--call", "app:start"]
